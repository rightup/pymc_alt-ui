"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[934],{55934:(e,t,s)=>{s.r(t),s.d(t,{default:()=>N});var l=s(95155),a=s(12115),r=s(59481),i=s(15378),d=s(47684),n=s(57903),o=s(58304),c=s(68055),x=s(13364),u=s(64964);let h="#4CFFB5",m="#39D98A",g="#F9D26F",p="#FF8A5C",b="#FF5C7A",j="#60A5FA";function v({positions:e}){let t=(0,r.ko)(),s=(0,a.useRef)(!1);return(0,a.useEffect)(()=>{e.length>0&&!s.current&&(s.current=!0,1===e.length?t.setView(e[0],12):t.fitBounds(e,{padding:[30,30],maxZoom:14}))},[t,e]),null}function N({neighbors:e,localNode:t}){let s=(0,a.useMemo)(()=>Object.entries(e).filter(([,e])=>{let t=e.latitude,s=e.longitude;return void 0!==t&&void 0!==s&&0!==t&&0!==s}),[e]),r=(0,a.useMemo)(()=>{let e=[];return t&&t.latitude&&t.longitude&&e.push([t.latitude,t.longitude]),s.forEach(([,t])=>{t.latitude&&t.longitude&&e.push([t.latitude,t.longitude])}),e},[s,t]),N=t&&t.latitude&&t.longitude?[t.latitude,t.longitude]:r.length>0?r[0]:[51.505,-.09];return 0===r.length?(0,l.jsx)("div",{className:"glass-card h-[400px] flex items-center justify-center",children:(0,l.jsxs)("div",{className:"text-center text-white/50",children:[(0,l.jsx)("p",{className:"text-lg mb-2",children:"No Location Data Available"}),(0,l.jsx)("p",{className:"text-sm",children:"Neighbors will appear on the map once they advertise their coordinates."})]})}):(0,l.jsx)("div",{className:"relative rounded-[1.125rem] overflow-hidden",style:{height:"400px"},children:(0,l.jsxs)("div",{className:"glass-card h-full relative",children:[(0,l.jsx)("div",{className:"absolute inset-0 z-[500] pointer-events-none",style:{background:"linear-gradient(180deg, rgba(140, 170, 220, 0.06) 0%, transparent 20%)",boxShadow:"inset 4px 4px 7px -4px rgba(160, 180, 220, 0.12), inset -4px -4px 7px -4px rgba(100, 140, 180, 0.08)",borderRadius:"inherit"}}),(0,l.jsx)("div",{className:"absolute inset-0 z-[501] pointer-events-none",style:{borderRadius:"inherit",border:"1px solid transparent",borderTopColor:"rgba(140, 160, 200, 0.38)",borderLeftColor:"rgba(140, 160, 200, 0.28)",borderRightColor:"rgba(100, 140, 180, 0.15)",borderBottomColor:"rgba(100, 140, 180, 0.18)"}}),(0,l.jsxs)(i.W,{center:N,zoom:8,style:{height:"100%",width:"100%",background:"#0d1520"},attributionControl:!0,className:"map-blue-water",children:[(0,l.jsx)(d.e,{attribution:'\xa9 <a href="https://www.openstreetmap.org/copyright">OpenStreetMap</a> contributors \xa9 <a href="https://carto.com/attributions">CARTO</a>',url:"https://{s}.basemaps.cartocdn.com/dark_all/{z}/{x}/{y}{r}.png",className:"map-tiles-blue-tint"}),(0,l.jsx)(v,{positions:r}),t&&t.latitude&&t.longitude&&s.map(([e,s])=>s.latitude&&s.longitude?(0,l.jsx)(n.R,{positions:[[t.latitude,t.longitude],[s.latitude,s.longitude]],color:"#5D6570",weight:1.2,opacity:.55},`line-${e}`):null),t&&t.latitude&&t.longitude&&(0,l.jsx)(o.p,{center:[t.latitude,t.longitude],radius:5,fillColor:j,color:"transparent",weight:0,opacity:1,fillOpacity:.9,children:(0,l.jsx)(c.z,{children:(0,l.jsxs)("div",{className:"text-gray-900 text-sm",children:[(0,l.jsx)("strong",{className:"text-base",children:t.name}),(0,l.jsx)("br",{}),(0,l.jsx)("span",{className:"text-cyan-600 font-medium",children:"This Node (Local)"}),(0,l.jsx)("br",{}),(0,l.jsxs)("span",{className:"text-xs text-gray-500",children:[t.latitude.toFixed(5),", ",t.longitude.toFixed(5)]})]})})}),s.map(([e,t])=>{var s,a;if(!t.latitude||!t.longitude)return null;let r=(s=t.snr,a=t.rssi,void 0!==s?s>=5?h:s>=0?m:s>=-5?g:s>=-10?p:b:void 0!==a?a>=-70?h:a>=-85?m:a>=-100?g:a>=-110?p:b:"#767688"),i=t.node_name||t.name||"Unknown";return(0,l.jsx)(o.p,{center:[t.latitude,t.longitude],radius:4,fillColor:r,color:"transparent",weight:0,opacity:1,fillOpacity:.9,children:(0,l.jsx)(c.z,{children:(0,l.jsxs)("div",{className:"text-gray-900 text-sm min-w-[150px]",children:[(0,l.jsx)("strong",{className:"text-base",children:i}),(0,l.jsx)("div",{className:"mt-1",children:(0,l.jsx)(u.Q,{hash:e,size:"sm",className:"!bg-gray-100 !border-gray-200 !text-gray-700"})}),(0,l.jsx)("hr",{className:"my-2 border-gray-200"}),void 0!==t.rssi&&(0,l.jsxs)("div",{children:["RSSI: ",(0,l.jsxs)("strong",{children:[t.rssi," dBm"]})]}),void 0!==t.snr&&(0,l.jsxs)("div",{children:["SNR: ",(0,l.jsxs)("strong",{children:[t.snr.toFixed(1)," dB"]})]}),void 0!==t.advert_count&&(0,l.jsxs)("div",{children:["Adverts: ",(0,l.jsx)("strong",{children:t.advert_count})]}),(0,l.jsxs)("div",{className:"text-xs text-gray-500 mt-1",children:["Last seen: ",(0,x.fw)(t.last_seen)]}),(0,l.jsxs)("div",{className:"text-xs text-gray-400",children:[t.latitude?.toFixed(5),", ",t.longitude?.toFixed(5)]})]})})},e)})]}),(0,l.jsxs)("div",{className:"absolute bottom-4 left-4 z-[600] text-xs",style:{background:"rgba(20, 20, 22, 0.85)",backdropFilter:"blur(12px)",WebkitBackdropFilter:"blur(12px)",borderRadius:"0.75rem",padding:"0.625rem",border:"1px solid rgba(140, 160, 200, 0.2)",maxWidth:"100px"},children:[(0,l.jsx)("div",{className:"text-text-secondary font-medium mb-1.5",children:"Signal"}),(0,l.jsxs)("div",{className:"flex flex-col gap-0.5",children:[(0,l.jsxs)("div",{className:"flex items-center gap-1.5",children:[(0,l.jsx)("div",{className:"w-2 h-2 rounded-full flex-shrink-0",style:{backgroundColor:h}}),(0,l.jsx)("span",{className:"text-text-muted",children:"≥5 dB"})]}),(0,l.jsxs)("div",{className:"flex items-center gap-1.5",children:[(0,l.jsx)("div",{className:"w-2 h-2 rounded-full flex-shrink-0",style:{backgroundColor:m}}),(0,l.jsx)("span",{className:"text-text-muted",children:"0–5"})]}),(0,l.jsxs)("div",{className:"flex items-center gap-1.5",children:[(0,l.jsx)("div",{className:"w-2 h-2 rounded-full flex-shrink-0",style:{backgroundColor:g}}),(0,l.jsx)("span",{className:"text-text-muted",children:"-5–0"})]}),(0,l.jsxs)("div",{className:"flex items-center gap-1.5",children:[(0,l.jsx)("div",{className:"w-2 h-2 rounded-full flex-shrink-0",style:{backgroundColor:p}}),(0,l.jsx)("span",{className:"text-text-muted",children:"-10–-5"})]}),(0,l.jsxs)("div",{className:"flex items-center gap-1.5",children:[(0,l.jsx)("div",{className:"w-2 h-2 rounded-full flex-shrink-0",style:{backgroundColor:b}}),(0,l.jsx)("span",{className:"text-text-muted",children:"<-10"})]}),(0,l.jsxs)("div",{className:"flex items-center gap-1.5 mt-1 pt-1 border-t border-white/10",children:[(0,l.jsx)("div",{className:"w-2 h-2 rounded-full flex-shrink-0",style:{backgroundColor:j}}),(0,l.jsx)("span",{className:"text-text-muted",children:"Local"})]})]})]})]})})}}}]);