(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[177],{7810:(e,t,r)=>{"use strict";r.d(t,{A:()=>a});let a=(0,r(78340).A)("users",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["path",{d:"M16 3.128a4 4 0 0 1 0 7.744",key:"16gr8j"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}]])},10857:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r={DecodeError:function(){return y},MiddlewareNotFoundError:function(){return v},MissingStaticPage:function(){return b},NormalizeError:function(){return g},PageNotFoundError:function(){return x},SP:function(){return p},ST:function(){return m},WEB_VITALS:function(){return s},execOnce:function(){return n},getDisplayName:function(){return u},getLocationOrigin:function(){return l},getURL:function(){return c},isAbsoluteUrl:function(){return o},isResSent:function(){return d},loadGetInitialProps:function(){return f},normalizeRepeatedSlashes:function(){return h},stringifyError:function(){return k}};for(var a in r)Object.defineProperty(t,a,{enumerable:!0,get:r[a]});let s=["CLS","FCP","FID","INP","LCP","TTFB"];function n(e){let t,r=!1;return(...a)=>(r||(r=!0,t=e(...a)),t)}let i=/^[a-zA-Z][a-zA-Z\d+\-.]*?:/,o=e=>i.test(e);function l(){let{protocol:e,hostname:t,port:r}=window.location;return`${e}//${t}${r?":"+r:""}`}function c(){let{href:e}=window.location,t=l();return e.substring(t.length)}function u(e){return"string"==typeof e?e:e.displayName||e.name||"Unknown"}function d(e){return e.finished||e.headersSent}function h(e){let t=e.split("?");return t[0].replace(/\\/g,"/").replace(/\/\/+/g,"/")+(t[1]?`?${t.slice(1).join("?")}`:"")}async function f(e,t){let r=t.res||t.ctx&&t.ctx.res;if(!e.getInitialProps)return t.ctx&&t.Component?{pageProps:await f(t.Component,t.ctx)}:{};let a=await e.getInitialProps(t);if(r&&d(r))return a;if(!a)throw Object.defineProperty(Error(`"${u(e)}.getInitialProps()" should resolve to an object. But found "${a}" instead.`),"__NEXT_ERROR_CODE",{value:"E394",enumerable:!1,configurable:!0});return a}let p="undefined"!=typeof performance,m=p&&["mark","measure","getEntriesByName"].every(e=>"function"==typeof performance[e]);class y extends Error{}class g extends Error{}class x extends Error{constructor(e){super(),this.code="ENOENT",this.name="PageNotFoundError",this.message=`Cannot find module for page: ${e}`}}class b extends Error{constructor(e,t){super(),this.message=`Failed to load static file for page: ${e} ${t}`}}class v extends Error{constructor(){super(),this.code="ENOENT",this.message="Cannot find the middleware module"}}function k(e){return JSON.stringify({message:e.message,stack:e.stack})}},13364:(e,t,r)=>{"use strict";function a(e){if(e<60)return`${Math.floor(e)}s`;let t=Math.floor(e/86400),r=Math.floor(e%86400/3600),a=Math.floor(e%3600/60),s=[];return t>0&&s.push(`${t}d`),r>0&&s.push(`${r}h`),(a>0||0===s.length)&&s.push(`${a}m`),s.join(" ")}function s(e){let t=Date.now()/1e3-e;return t<60?"just now":t<3600?`${Math.floor(t/60)}m ago`:t<86400?`${Math.floor(t/3600)}h ago`:`${Math.floor(t/86400)}d ago`}function n(e){return new Date(1e3*e).toLocaleString("en-US",{month:"short",day:"numeric",hour:"2-digit",minute:"2-digit",second:"2-digit",hour12:!1})}function i(e){return new Date(1e3*e).toLocaleTimeString("en-US",{hour12:!1,hour:"2-digit",minute:"2-digit",second:"2-digit"})}function o(e){return`${(e/1e6).toFixed(3)} MHz`}function l(e){return`${(e/1e3).toFixed(1)} kHz`}r.d(t,{$o:()=>l,QR:()=>o,Y0:()=>a,fU:()=>i,fw:()=>s,r6:()=>n})},17608:(e,t,r)=>{"use strict";r.d(t,{BackgroundProvider:()=>i});var a=r(95155),s=r(12115),n=r(71731);function i(){let e=(0,n.W)(),[t,r]=(0,s.useState)(80);(0,s.useEffect)(()=>{let e=localStorage.getItem("pymc-bg-brightness");if(e){let t=parseInt(e,10);!isNaN(t)&&t>=0&&t<=100&&r(t)}let t=e=>{r(e.detail)};return window.addEventListener("brightness-change",t),()=>{window.removeEventListener("brightness-change",t)}},[]);let i=(100-t)/100;return(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)("div",{className:"fixed inset-0 -z-10 bg-cover bg-center bg-no-repeat",style:{backgroundImage:`url(${e})`}}),i>0&&(0,a.jsx)("div",{className:"fixed inset-0 -z-10 bg-black pointer-events-none transition-opacity duration-150",style:{opacity:i}})]})}},20091:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a={formatUrl:function(){return o},formatWithValidation:function(){return c},urlObjectKeys:function(){return l}};for(var s in a)Object.defineProperty(t,s,{enumerable:!0,get:a[s]});let n=r(66388)._(r(31393)),i=/https?|ftp|gopher|file/;function o(e){let{auth:t,hostname:r}=e,a=e.protocol||"",s=e.pathname||"",o=e.hash||"",l=e.query||"",c=!1;t=t?encodeURIComponent(t).replace(/%3A/i,":")+"@":"",e.host?c=t+e.host:r&&(c=t+(~r.indexOf(":")?`[${r}]`:r),e.port&&(c+=":"+e.port)),l&&"object"==typeof l&&(l=String(n.urlQueryToSearchParams(l)));let u=e.search||l&&`?${l}`||"";return a&&!a.endsWith(":")&&(a+=":"),e.slashes||(!a||i.test(a))&&!1!==c?(c="//"+(c||""),s&&"/"!==s[0]&&(s="/"+s)):c||(c=""),o&&"#"!==o[0]&&(o="#"+o),u&&"?"!==u[0]&&(u="?"+u),s=s.replace(/[?#]/g,encodeURIComponent),u=u.replace("#","%23"),`${a}${c}${s}${u}${o}`}let l=["auth","hash","host","hostname","href","path","pathname","port","protocol","query","search","slashes"];function c(e){return o(e)}},21172:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"useMergedRef",{enumerable:!0,get:function(){return s}});let a=r(12115);function s(e,t){let r=(0,a.useRef)(null),s=(0,a.useRef)(null);return(0,a.useCallback)(a=>{if(null===a){let e=r.current;e&&(r.current=null,e());let t=s.current;t&&(s.current=null,t())}else e&&(r.current=n(e,a)),t&&(s.current=n(t,a))},[e,t])}function n(e,t){if("function"!=typeof e)return e.current=t,()=>{e.current=null};{let r=e(t);return"function"==typeof r?r:()=>e(null)}}("function"==typeof t.default||"object"==typeof t.default&&null!==t.default)&&void 0===t.default.__esModule&&(Object.defineProperty(t.default,"__esModule",{value:!0}),Object.assign(t.default,t),e.exports=t.default)},27529:(e,t,r)=>{"use strict";r.d(t,{A_:()=>d,Fz:()=>m,GT:()=>n,He:()=>x,Nw:()=>c,RC:()=>u,Ty:()=>p,V0:()=>o,VS:()=>g,ao:()=>i,f3:()=>h,iY:()=>f,w7:()=>y});let a=r(41463).env.NEXT_PUBLIC_API_URL||"";async function s(e,t){let r=`${a}${e}`,s={};if(t?.headers){let e=t.headers;e instanceof Headers?e.forEach((e,t)=>{s[t]=e}):Array.isArray(e)?e.forEach(([e,t])=>{s[e]=t}):Object.assign(s,e)}t?.body&&(s["Content-Type"]="application/json");let n=await fetch(r,{...t,headers:s});if(!n.ok)throw Error(`API error: ${n.status} ${n.statusText}`);return n.json()}async function n(){return s("/api/stats")}async function i(){return s("/api/logs")}async function o(e=100){return s(`/api/recent_packets?limit=${e}`)}async function l(e){let t=Math.max(e.limit||1e3,5e3),r=await o(t);if(!r.success||!r.data)return r;let a=r.data;return void 0!==e.type&&(a=a.filter(t=>(t.type??t.payload_type)===e.type)),void 0!==e.route&&(a=a.filter(t=>(t.route??t.route_type)===e.route)),e.start_timestamp&&(a=a.filter(t=>t.timestamp>=e.start_timestamp)),e.end_timestamp&&(a=a.filter(t=>t.timestamp<=e.end_timestamp)),e.limit&&a.length>e.limit&&(a=a.slice(0,e.limit)),{success:!0,data:a,count:a.length}}async function c(e=24){return s(`/api/packet_type_graph_data?hours=${e}`)}async function u(e=24){return s(`/api/noise_floor_history?hours=${e}`)}async function d(){return s("/api/hardware_stats")}async function h(){return s("/api/send_advert",{method:"POST",body:"{}"})}async function f(e){return s("/api/set_mode",{method:"POST",body:JSON.stringify({mode:e})})}async function p(e){return s("/api/set_duty_cycle",{method:"POST",body:JSON.stringify({enabled:e})})}async function m(e=20,t=20){try{let r=Math.floor(Date.now()/1e3),a=r-60*e,s=60*e/t,n=await l({start_timestamp:a,end_timestamp:r,limit:5e3});if(!n.success||!n.data)return{success:!1,error:n.error||"Failed to fetch packets"};let i=n.data,o=()=>{let e=[];for(let r=0;r<t;r++)e.push({bucket:r,start:a+r*s,end:a+(r+1)*s,count:0,avg_snr:0,avg_rssi:0});return e},c=o(),u=o(),d=o(),h=o(),f=c.map(()=>({snr:0,rssi:0,count:0}));for(let e of i){let r=Math.floor((e.timestamp-a)/s);if(r<0||r>=t)continue;let n=e.packet_origin;"tx_local"===n?u[r].count++:"tx_forward"===n||e.transmitted?d[r].count++:e.drop_reason&&h[r].count++,"tx_local"!==n&&(c[r].count++,f[r].snr+=e.snr||0,f[r].rssi+=e.rssi||0,f[r].count++)}for(let e=0;e<t;e++)f[e].count>0&&(c[e].avg_snr=f[e].snr/f[e].count,c[e].avg_rssi=f[e].rssi/f[e].count);return{success:!0,data:{time_range_minutes:e,bucket_count:t,bucket_duration_seconds:s,start_time:a,end_time:r,received:c,transmitted:u,forwarded:d,dropped:h}}}catch(e){return{success:!1,error:String(e)}}}async function y(e=24){try{let t=Math.floor(Date.now()/1e3),r=t-3600*e,[a,s]=await Promise.all([l({start_timestamp:r,end_timestamp:t,limit:5e4}),n()]);if(!a.success||!a.data)return{success:!1,error:a.error||"Failed to fetch packets"};let i=a.data,o=s.config?.radio?.spreading_factor||8,c=1e3*(s.config?.radio?.bandwidth||125),u=[];for(let t=0;t<e;t++)u.push({t:(r+3600*t)*1e3,tx_airtime_ms:0,rx_airtime_ms:0,tx_pkts:0,rx_pkts_ok:0,tx_util_pct:0,rx_util_decoded_pct:0,radio_activity_pct:0,avg_rx_airtime_ms_per_pkt:0,avg_tx_airtime_ms_per_pkt:0});for(let t of i){let a=Math.floor((t.timestamp-r)/3600);if(a<0||a>=e)continue;let s=t.length||t.payload_length||32,n=function(e,t=8,r=125e3){let a=Math.pow(2,t)/(r/1e3);return 8*a+(e+4.25)*8*a}(s,o,c),i=t.packet_origin;"tx_local"===i||"tx_forward"===i||t.transmitted?(u[a].tx_airtime_ms+=n,u[a].tx_pkts++):(u[a].rx_airtime_ms+=n,u[a].rx_pkts_ok++)}for(let e of u)e.tx_util_pct=e.tx_airtime_ms/36e5*100,e.rx_util_decoded_pct=e.rx_airtime_ms/36e5*100,e.radio_activity_pct=(e.tx_airtime_ms+e.rx_airtime_ms)/36e5*100,e.rx_pkts_ok>0&&(e.avg_rx_airtime_ms_per_pkt=e.rx_airtime_ms/e.rx_pkts_ok),e.tx_pkts>0&&(e.avg_tx_airtime_ms_per_pkt=e.tx_airtime_ms/e.tx_pkts);return{success:!0,data:{bins:u,bin_duration_seconds:3600,hours:e,anomaly_counters:{missing_airtime_ms:0,outlier_bins:0}}}}catch(e){return{success:!1,error:String(e)}}}async function g(e){return s("/api/update_radio_config",{method:"POST",body:JSON.stringify(e)})}async function x(e){return s("/api/set_log_level",{method:"POST",body:JSON.stringify({level:e})})}},29722:(e,t,r)=>{"use strict";function a(){for(var e,t,r=0,a="",s=arguments.length;r<s;r++)(e=arguments[r])&&(t=function e(t){var r,a,s="";if("string"==typeof t||"number"==typeof t)s+=t;else if("object"==typeof t)if(Array.isArray(t)){var n=t.length;for(r=0;r<n;r++)t[r]&&(a=e(t[r]))&&(s&&(s+=" "),s+=a)}else for(a in t)t[a]&&(s&&(s+=" "),s+=a);return s}(e))&&(a&&(a+=" "),a+=t);return a}r.d(t,{$:()=>a,A:()=>s});let s=a},29842:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"errorOnce",{enumerable:!0,get:function(){return r}});let r=e=>{}},31393:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r={assign:function(){return o},searchParamsToUrlQuery:function(){return s},urlQueryToSearchParams:function(){return i}};for(var a in r)Object.defineProperty(t,a,{enumerable:!0,get:r[a]});function s(e){let t={};for(let[r,a]of e.entries()){let e=t[r];void 0===e?t[r]=a:Array.isArray(e)?e.push(a):t[r]=[e,a]}return t}function n(e){return"string"==typeof e?e:("number"!=typeof e||isNaN(e))&&"boolean"!=typeof e?"":String(e)}function i(e){let t=new URLSearchParams;for(let[r,a]of Object.entries(e))if(Array.isArray(a))for(let e of a)t.append(r,n(e));else t.set(r,n(a));return t}function o(e,...t){for(let r of t){for(let t of r.keys())e.delete(t);for(let[t,a]of r.entries())e.append(t,a)}return e}},33210:(e,t,r)=>{"use strict";r.d(t,{A:()=>a});let a=(0,r(78340).A)("x",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]])},46029:(e,t,r)=>{"use strict";r.d(t,{A:()=>a});let a=(0,r(78340).A)("radio",[["path",{d:"M16.247 7.761a6 6 0 0 1 0 8.478",key:"1fwjs5"}],["path",{d:"M19.075 4.933a10 10 0 0 1 0 14.134",key:"ehdyv1"}],["path",{d:"M4.925 19.067a10 10 0 0 1 0-14.134",key:"1q22gi"}],["path",{d:"M7.753 16.239a6 6 0 0 1 0-8.478",key:"r2q7qm"}],["circle",{cx:"12",cy:"12",r:"2",key:"1c9p78"}]])},48368:(e,t,r)=>{"use strict";r.d(t,{A:()=>a});let a=(0,r(78340).A)("file-text",[["path",{d:"M6 22a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2h8a2.4 2.4 0 0 1 1.704.706l3.588 3.588A2.4 2.4 0 0 1 20 8v12a2 2 0 0 1-2 2z",key:"1oefj6"}],["path",{d:"M14 2v5a1 1 0 0 0 1 1h5",key:"wfsgrz"}],["path",{d:"M10 9H8",key:"b1mrlr"}],["path",{d:"M16 13H8",key:"t4e002"}],["path",{d:"M16 17H8",key:"z1uh3a"}]])},48884:(e,t,r)=>{"use strict";r.d(t,{CM:()=>a,Eo:()=>u,IA:()=>n,JW:()=>s,v5:()=>l,xt:()=>o});let a=[{label:"20m",minutes:20,buckets:40},{label:"1h",minutes:60,buckets:60},{label:"3h",minutes:180,buckets:90},{label:"12h",minutes:720,buckets:72},{label:"24h",minutes:1440,buckets:96},{label:"3d",minutes:4320,buckets:72},{label:"7d",minutes:10080,buckets:84}],s=[{label:"1h",hours:1},{label:"3h",hours:3},{label:"12h",hours:12},{label:"24h",hours:24},{label:"3d",hours:72},{label:"7d",hours:168}],n={received:"#39D98A",forwarded:"#60A5FA",transmitted:"#F9D26F",dropped:"#FF5C7A",neutral:"#B0B0C3"},i={advert:"ADVERT",grp_txt:"GRP_TXT",txt_msg:"TXT_MSG",response:"RESPONSE",anon_req:"ANON_REQ",path:"PATH",req:"REQ",ack:"ACK"};function o(e){return i[e.toLowerCase()]||e.toUpperCase().slice(0,8)}let l={stats:3e3,packets:3e3,charts:3e4,logs:2e3,system:3e3},c={DEBUG:"text-[var(--log-debug)] border-[var(--log-debug)]/30",INFO:"text-[var(--log-info)] border-[var(--log-info)]/30",WARNING:"text-[var(--log-warning)] border-[var(--log-warning)]/30",ERROR:"text-[var(--log-error)] border-[var(--log-error)]/30",CRITICAL:"text-[var(--log-critical)] border-[var(--log-critical)]/50 bg-[var(--log-critical)]/10"};function u(e){return c[e]||"text-text-muted border-border-subtle"}},51568:(e,t,r)=>{"use strict";r.d(t,{Sidebar:()=>O});var a=r(95155),s=r(12115),n=r(98500),i=r.n(n),o=r(74645),l=r(78340);let c=(0,l.A)("layout-dashboard",[["rect",{width:"7",height:"9",x:"3",y:"3",rx:"1",key:"10lvy0"}],["rect",{width:"7",height:"5",x:"14",y:"3",rx:"1",key:"16une8"}],["rect",{width:"7",height:"9",x:"14",y:"12",rx:"1",key:"1hutg5"}],["rect",{width:"7",height:"5",x:"3",y:"16",rx:"1",key:"ldoo1y"}]]);var u=r(46029),d=r(7810),h=r(89123),f=r(65576),p=r(48368),m=r(89363);let y=(0,l.A)("sliders-vertical",[["path",{d:"M10 8h4",key:"1sr2af"}],["path",{d:"M12 21v-9",key:"17s77i"}],["path",{d:"M12 8V3",key:"13r4qs"}],["path",{d:"M17 16h4",key:"h1uq16"}],["path",{d:"M19 12V3",key:"o1uvq1"}],["path",{d:"M19 21v-5",key:"qua636"}],["path",{d:"M3 14h4",key:"bcjad9"}],["path",{d:"M5 10V3",key:"cb8scm"}],["path",{d:"M5 21v-7",key:"1w1uti"}]]);var g=r(66088),x=r(56204);let b=(0,l.A)("play",[["path",{d:"M5 5a2 2 0 0 1 3.008-1.728l11.997 6.998a2 2 0 0 1 .003 3.458l-12 7A2 2 0 0 1 5 19z",key:"10ikf1"}]]),v=(0,l.A)("pause",[["rect",{x:"14",y:"3",width:"5",height:"18",rx:"1",key:"kaeet6"}],["rect",{x:"5",y:"3",width:"5",height:"18",rx:"1",key:"1wsw3u"}]]);var k=r(66669),_=r(84980);let j=(0,l.A)("wifi",[["path",{d:"M12 20h.01",key:"zekei9"}],["path",{d:"M2 8.82a15 15 0 0 1 20 0",key:"dnpr2z"}],["path",{d:"M5 12.859a10 10 0 0 1 14 0",key:"1x1e6c"}],["path",{d:"M8.5 16.429a5 5 0 0 1 7 0",key:"1bycff"}]]);var w=r(33210);let N=(0,l.A)("menu",[["path",{d:"M4 5h16",key:"1tepv9"}],["path",{d:"M4 12h16",key:"1lakjw"}],["path",{d:"M4 19h16",key:"1djgab"}]]);var A=r(29722),M=r(83278),E=r(57060),S=r(13364),P=r(48884);let L=[{name:"Dashboard",href:"/",icon:c},{name:"Packets",href:"/packets/",icon:u.A},{name:"Neighbors",href:"/neighbors/",icon:d.A},{name:"Statistics",href:"/statistics/",icon:h.A},{name:"System",href:"/system/",icon:f.A},{name:"Logs",href:"/logs/",icon:p.A},{name:"Settings",href:"/settings/",icon:m.A}],C="pymc-controls-expanded";function O(){let e=(0,o.usePathname)(),{stats:t,fetchStats:r,setMode:n,setDutyCycle:l,sendAdvert:c}=(0,M.Pj)(),[d,h]=(0,s.useState)(!1),[f,p]=(0,s.useState)(!0),[m,O]=(0,s.useState)(!1);(0,s.useEffect)(()=>{let e=localStorage.getItem(C);null!==e&&p("true"===e)},[]);let R=()=>{let e=!f;p(e),localStorage.setItem(C,String(e))};(0,E.n)(r,P.v5.stats),(0,s.useEffect)(()=>{h(!1)},[e]),(0,s.useEffect)(()=>(document.body.style.overflow=d?"hidden":"",()=>{document.body.style.overflow=""}),[d]);let T=t?.noise_floor_dbm,F=t?.duty_cycle_percent??0,$=t?.config?.duty_cycle?.max_airtime_percent??10,I=t?.config?.repeater?.mode??"forward",D=t?.config?.duty_cycle?.enforcement_enabled??!1,z=async()=>{O(!0),await c(),setTimeout(()=>O(!1),1e3)},U=()=>{n("forward"===I?"monitor":"forward")},B=()=>{l(!D)},q=()=>(0,a.jsx)("nav",{className:"flex-1 px-3 py-4 space-y-1 overflow-y-auto",children:L.map(t=>{let r=e===t.href;return(0,a.jsxs)(i(),{href:t.href,onClick:()=>h(!1),className:(0,A.A)("flex items-center gap-3 px-3 py-2.5 rounded-xl transition-all duration-150",r?"bg-accent-primary/15 text-accent-primary":"text-text-muted hover:text-text-primary hover:bg-white/5"),children:[(0,a.jsx)(t.icon,{className:(0,A.A)("w-5 h-5 flex-shrink-0",r&&"text-accent-primary")}),(0,a.jsx)("span",{className:"type-body-sm font-medium",children:t.name})]},t.name)})}),V=({compact:e=!1})=>(0,a.jsxs)("div",{className:"px-3 py-3",children:[(0,a.jsxs)("button",{onClick:R,className:"w-full flex items-center justify-between px-2 py-1.5 mb-2 rounded-lg hover:bg-white/5 transition-colors",children:[(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[(0,a.jsx)(y,{className:"w-4 h-4 text-accent-primary"}),(0,a.jsx)("span",{className:"type-data-xs text-text-muted uppercase tracking-wide",children:"Controls"})]}),(0,a.jsx)(g.A,{className:(0,A.A)("w-4 h-4 text-text-muted transition-transform duration-200",f?"rotate-0":"-rotate-90")})]}),(0,a.jsx)("div",{className:(0,A.A)("overflow-hidden transition-all duration-300 ease-out",f?"max-h-96 opacity-100":"max-h-0 opacity-0"),children:(0,a.jsxs)("div",{className:"control-panel-skeuo",children:[(0,a.jsxs)("button",{onClick:z,disabled:m,className:(0,A.A)("control-btn control-btn-primary w-full",m&&"opacity-70"),children:[(0,a.jsx)(x.A,{className:(0,A.A)("w-4 h-4",m&&"animate-pulse")}),(0,a.jsx)("span",{children:m?"Sending...":"Send Advert"})]}),(0,a.jsxs)("div",{className:"control-toggle-group",children:[(0,a.jsxs)("div",{className:"control-toggle-label",children:[(0,a.jsx)("span",{children:"Mode"}),(0,a.jsx)("span",{className:(0,A.A)("control-toggle-status","forward"===I?"text-accent-success":"text-accent-secondary"),children:"forward"===I?"FWD":"MON"})]}),(0,a.jsx)("button",{onClick:U,className:(0,A.A)("control-btn w-full","forward"===I?"control-btn-success":"control-btn-warning"),children:"forward"===I?(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(b,{className:"w-4 h-4"}),(0,a.jsx)("span",{children:"Forward"})]}):(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(v,{className:"w-4 h-4"}),(0,a.jsx)("span",{children:"Monitor"})]})})]}),(0,a.jsxs)("div",{className:"control-toggle-group",children:[(0,a.jsxs)("div",{className:"control-toggle-label",children:[(0,a.jsx)("span",{children:"Duty Cycle"}),(0,a.jsx)("span",{className:(0,A.A)("control-toggle-status",D?"text-accent-success":"text-text-muted"),children:D?"ON":"OFF"})]}),(0,a.jsxs)("button",{onClick:B,className:(0,A.A)("control-btn w-full",D?"control-btn-success":"control-btn-neutral"),children:[(0,a.jsx)(k.A,{className:"w-4 h-4"}),(0,a.jsx)("span",{children:D?"Enabled":"Disabled"})]})]})]})})]}),H=()=>(0,a.jsxs)("div",{className:"mt-auto border-t border-white/5",children:[(0,a.jsxs)("div",{className:"px-4 py-3 flex items-center justify-between",children:[(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[(0,a.jsxs)("span",{className:"relative flex h-2 w-2",children:[(0,a.jsx)("span",{className:"animate-ping absolute inline-flex h-full w-full rounded-full bg-accent-success opacity-75"}),(0,a.jsx)("span",{className:"relative inline-flex rounded-full h-2 w-2 bg-accent-success"})]}),(0,a.jsx)("span",{className:"type-data-xs text-text-muted uppercase tracking-wide",children:"Live"})]}),t?.version&&(0,a.jsxs)("span",{className:"type-data-xs text-text-muted",children:["v",t.version]})]}),t?.uptime_seconds!==void 0&&(0,a.jsxs)("div",{className:"px-4 pb-3 flex items-center gap-2",children:[(0,a.jsx)(_.A,{className:"w-3.5 h-3.5 text-text-muted"}),(0,a.jsxs)("span",{className:"type-data-xs text-text-secondary tabular-nums",children:[(0,S.Y0)(t.uptime_seconds)," uptime"]})]}),(0,a.jsx)("div",{className:"px-3 pb-3",children:(0,a.jsx)("div",{className:"bg-white/[0.03] rounded-xl p-3",children:(0,a.jsxs)("div",{className:"flex items-center justify-between mb-1",children:[(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[(0,a.jsx)(u.A,{className:"w-4 h-4 text-accent-primary"}),(0,a.jsx)("span",{className:"type-data-xs text-text-muted",children:"Noise Floor"})]}),(0,a.jsx)("span",{className:"type-data text-text-primary tabular-nums",children:null!=T?`${T.toFixed(0)} dBm`:"â€”"})]})})}),(0,a.jsx)("div",{className:"px-3 pb-4",children:(0,a.jsxs)("div",{className:"bg-white/[0.03] rounded-xl p-3",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between mb-2",children:[(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[(0,a.jsx)(k.A,{className:"w-4 h-4 text-accent-secondary"}),(0,a.jsx)("span",{className:"type-data-xs text-text-muted",children:"Airtime"})]}),(0,a.jsxs)("span",{className:"type-data-xs text-text-primary tabular-nums",children:[F.toFixed(1),"%"]})]}),(0,a.jsx)("div",{className:"h-1 bg-white/10 rounded-full overflow-hidden",children:(0,a.jsx)("div",{className:"h-full bg-accent-secondary rounded-full transition-all duration-500",style:{width:`${Math.min(F/$*100,100)}%`}})})]})})]});return(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)("header",{className:"lg:hidden fixed top-0 inset-x-0 z-50 h-14 bg-bg-body/70 backdrop-blur-xl border-b border-white/10",children:(0,a.jsxs)("div",{className:"flex items-center justify-between h-full px-4",children:[(0,a.jsxs)("div",{className:"flex items-center gap-3",children:[(0,a.jsx)("div",{className:"w-8 h-8 rounded-lg bg-accent-primary/20 flex items-center justify-center",children:(0,a.jsx)(j,{className:"w-4.5 h-4.5 text-accent-primary"})}),(0,a.jsx)("span",{className:"type-body-sm font-semibold text-text-primary",children:"pyMC Repeater"})]}),(0,a.jsx)("button",{onClick:()=>h(!d),className:"w-10 h-10 flex items-center justify-center rounded-xl hover:bg-white/5 active:bg-white/10 transition-colors","aria-label":d?"Close menu":"Open menu",children:d?(0,a.jsx)(w.A,{className:"w-5 h-5 text-text-primary"}):(0,a.jsx)(N,{className:"w-5 h-5 text-text-primary"})})]})}),(0,a.jsx)("div",{className:(0,A.A)("lg:hidden fixed inset-0 z-50 bg-black/60 backdrop-blur-sm transition-opacity duration-300",d?"opacity-100":"opacity-0 pointer-events-none"),onClick:()=>h(!1),"aria-hidden":"true"}),(0,a.jsxs)("aside",{className:(0,A.A)("lg:hidden fixed top-0 left-0 z-50 w-72 max-w-[85vw] h-full","bg-bg-surface/80 backdrop-blur-2xl border-r border-white/10","flex flex-col","transform transition-transform duration-300 ease-out",d?"translate-x-0":"-translate-x-full pointer-events-none"),children:[(0,a.jsxs)("div",{className:"flex items-center gap-3 px-4 py-5 border-b border-white/5",children:[(0,a.jsx)("div",{className:"w-10 h-10 rounded-xl bg-accent-primary/20 flex items-center justify-center",children:(0,a.jsx)(j,{className:"w-5 h-5 text-accent-primary"})}),(0,a.jsxs)("div",{children:[(0,a.jsx)("h1",{className:"type-body-sm font-semibold text-text-primary",children:"pyMC Repeater"}),(0,a.jsx)("p",{className:"type-data-xs text-text-muted",children:"LoRa Mesh Dashboard"})]})]}),(0,a.jsx)(q,{}),(0,a.jsx)(V,{compact:!0}),(0,a.jsx)(H,{})]}),(0,a.jsxs)("aside",{className:"hidden lg:flex flex-col w-64 flex-shrink-0 h-screen sticky top-0 bg-bg-surface/70 backdrop-blur-2xl border-r border-white/10",children:[(0,a.jsxs)("div",{className:"flex items-center gap-3 px-5 py-6 border-b border-white/5",children:[(0,a.jsx)("div",{className:"w-10 h-10 rounded-xl bg-accent-primary/15 flex items-center justify-center",children:(0,a.jsx)(j,{className:"w-5 h-5 text-accent-primary"})}),(0,a.jsxs)("div",{children:[(0,a.jsx)("h1",{className:"type-body font-semibold text-text-primary",children:"pyMC Repeater"}),(0,a.jsx)("p",{className:"type-data-xs text-text-muted",children:"LoRa Mesh Dashboard"})]})]}),(0,a.jsx)(q,{}),(0,a.jsx)(V,{}),(0,a.jsx)(H,{})]})]})}},51743:()=>{},56204:(e,t,r)=>{"use strict";r.d(t,{A:()=>a});let a=(0,r(78340).A)("send",[["path",{d:"M14.536 21.686a.5.5 0 0 0 .937-.024l6.5-19a.496.496 0 0 0-.635-.635l-19 6.5a.5.5 0 0 0-.024.937l7.93 3.18a2 2 0 0 1 1.112 1.11z",key:"1ffxy3"}],["path",{d:"m21.854 2.147-10.94 10.939",key:"12cjpa"}]])},57060:(e,t,r)=>{"use strict";r.d(t,{n:()=>s});var a=r(12115);function s(e,t,r=!0,n=!1){let i=(0,a.useRef)(e);(0,a.useEffect)(()=>{i.current=e},[e]),(0,a.useEffect)(()=>{if(!r)return;n||i.current();let e=setInterval(()=>{i.current()},t);return()=>clearInterval(e)},[t,r,n])}},58288:e=>{e.exports={style:{fontFamily:"'Inter', 'Inter Fallback'",fontStyle:"normal"},className:"__className_37ef13",variable:"__variable_37ef13"}},65576:(e,t,r)=>{"use strict";r.d(t,{A:()=>a});let a=(0,r(78340).A)("cpu",[["path",{d:"M12 20v2",key:"1lh1kg"}],["path",{d:"M12 2v2",key:"tus03m"}],["path",{d:"M17 20v2",key:"1rnc9c"}],["path",{d:"M17 2v2",key:"11trls"}],["path",{d:"M2 12h2",key:"1t8f8n"}],["path",{d:"M2 17h2",key:"7oei6x"}],["path",{d:"M2 7h2",key:"asdhe0"}],["path",{d:"M20 12h2",key:"1q8mjw"}],["path",{d:"M20 17h2",key:"1fpfkl"}],["path",{d:"M20 7h2",key:"1o8tra"}],["path",{d:"M7 20v2",key:"4gnj0m"}],["path",{d:"M7 2v2",key:"1i4yhu"}],["rect",{x:"4",y:"4",width:"16",height:"16",rx:"2",key:"1vbyd7"}],["rect",{x:"8",y:"8",width:"8",height:"8",rx:"1",key:"z9xiuo"}]])},66088:(e,t,r)=>{"use strict";r.d(t,{A:()=>a});let a=(0,r(78340).A)("chevron-down",[["path",{d:"m6 9 6 6 6-6",key:"qrunsl"}]])},66669:(e,t,r)=>{"use strict";r.d(t,{A:()=>a});let a=(0,r(78340).A)("gauge",[["path",{d:"m12 14 4-4",key:"9kzdfg"}],["path",{d:"M3.34 19a10 10 0 1 1 17.32 0",key:"19p75a"}]])},67073:e=>{e.exports={style:{fontFamily:"'JetBrains Mono', 'JetBrains Mono Fallback'",fontStyle:"normal"},className:"__className_e896d9",variable:"__variable_e896d9"}},69470:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"isLocalURL",{enumerable:!0,get:function(){return n}});let a=r(10857),s=r(48512);function n(e){if(!(0,a.isAbsoluteUrl)(e))return!0;try{let t=(0,a.getLocationOrigin)(),r=new URL(e,t);return r.origin===t&&(0,s.hasBasePath)(r.pathname)}catch(e){return!1}}},71731:(e,t,r)=>{"use strict";r.d(t,{C:()=>c,W:()=>u});var a=r(95155),s=r(12115),n=r(29722);let i=[{id:"default",src:"/images/bg.jpg",theme:null},{id:"amber",src:"/images/bg-amber.jpg",theme:"amber"},{id:"grey",src:"/images/bg-grey.jpg",theme:"grey"},{id:"black",src:"/images/bg-black.jpg",theme:"black"},{id:"flora",src:"/images/bg-flora.jpg",theme:"flora"}],o="pymc-background",l="pymc-bg-brightness";function c(){let[e,t]=(0,s.useState)("default"),[r,c]=(0,s.useState)(80),[u,d]=(0,s.useState)(!1),[h,f]=(0,s.useState)(!1),[p,m]=(0,s.useState)(!1),y=(0,s.useRef)(null),g=(0,s.useRef)(null);(0,s.useEffect)(()=>{f(!0);let e=localStorage.getItem(o),r=localStorage.getItem(l);if(r){let e=parseInt(r,10);!isNaN(e)&&e>=0&&e<=100&&c(e)}if(e&&i.some(t=>t.id===e)){t(e);let r=i.find(t=>t.id===e);r?.theme&&document.documentElement.setAttribute("data-theme",r.theme)}},[]);let x=e=>{c(e),localStorage.setItem(l,String(e)),window.dispatchEvent(new CustomEvent("brightness-change",{detail:e}))};if(!h)return(0,a.jsx)("div",{className:"flex gap-2"});let b=(e,t)=>{if(!g.current)return r;let a=g.current.y-e;return Math.round(Math.max(0,Math.min(100,g.current.brightness+a/(t?200:80)*100)))};return(0,a.jsx)("div",{className:"flex gap-2 items-center flex-shrink-0",children:i.map(s=>{let l=e===s.id,c=l&&(u||p);return(0,a.jsxs)("div",{ref:l?y:void 0,className:(0,n.A)("relative rounded-md overflow-hidden transition-all duration-300 ease-out","ring-offset-1 ring-offset-bg-body w-10 h-10",l?"ring-2 ring-accent-primary scale-105 cursor-ns-resize":"ring-1 ring-white/20 hover:ring-white/40 opacity-70 hover:opacity-100 cursor-pointer"),onMouseEnter:()=>l&&d(!0),onMouseLeave:()=>!p&&d(!1),onClick:()=>{var e;let r;return!l&&(t(e=s.id),d(!0),localStorage.setItem(o,e),r=i.find(t=>t.id===e),void(r?.theme?document.documentElement.setAttribute("data-theme",r.theme):document.documentElement.removeAttribute("data-theme"),window.dispatchEvent(new CustomEvent("background-change",{detail:e}))))},onTouchStart:e=>{if(!l)return;e.preventDefault(),g.current={y:e.touches[0].clientY,brightness:r},m(!0),d(!0);let t=e=>{e.preventDefault(),x(b(e.touches[0].clientY,!0))},a=()=>{document.removeEventListener("touchmove",t),document.removeEventListener("touchend",a),g.current=null,m(!1),setTimeout(()=>d(!1),1500)};document.addEventListener("touchmove",t,{passive:!1}),document.addEventListener("touchend",a)},onMouseDown:e=>{if(!l)return;e.preventDefault(),g.current={y:e.clientY,brightness:r},m(!0),d(!0);let t=e=>{x(b(e.clientY,!1))},a=()=>{document.removeEventListener("mousemove",t),document.removeEventListener("mouseup",a),g.current=null,m(!1)};document.addEventListener("mousemove",t),document.addEventListener("mouseup",a)},children:[(0,a.jsx)("div",{className:"absolute inset-0 bg-cover bg-center transition-opacity duration-200",style:{backgroundImage:`url(${s.src})`,opacity:c?.4:1}}),l&&(0,a.jsxs)("div",{className:(0,n.A)("absolute inset-0 transition-opacity duration-200",c?"opacity-100":"opacity-0"),children:[(0,a.jsx)("div",{className:"absolute inset-x-0 bottom-0 bg-black/70 transition-all duration-100 ease-out",style:{height:`${100-r}%`}}),(0,a.jsx)("div",{className:"absolute inset-x-1 h-0.5 bg-white rounded-full shadow-lg transition-all duration-100 ease-out",style:{top:`${100-r}%`}}),(0,a.jsx)("div",{className:"absolute inset-0 flex items-center justify-center",children:(0,a.jsxs)("span",{className:"text-[10px] font-mono font-bold text-white drop-shadow-lg",children:[r,"%"]})})]})]},s.id)})})}function u(){let[e,t]=(0,s.useState)("/images/bg.jpg");return(0,s.useEffect)(()=>{let e=localStorage.getItem(o);t((i.find(t=>t.id===e)||i[0]).src);let r=e=>{t((i.find(t=>t.id===e.detail)||i[0]).src)};return window.addEventListener("background-change",r),()=>{window.removeEventListener("background-change",r)}},[]),e}},78340:(e,t,r)=>{"use strict";r.d(t,{A:()=>l});var a=r(12115);let s=e=>{let t=e.replace(/^([A-Z])|[\s-_]+(\w)/g,(e,t,r)=>r?r.toUpperCase():t.toLowerCase());return t.charAt(0).toUpperCase()+t.slice(1)},n=(...e)=>e.filter((e,t,r)=>!!e&&""!==e.trim()&&r.indexOf(e)===t).join(" ").trim();var i={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};let o=(0,a.forwardRef)(({color:e="currentColor",size:t=24,strokeWidth:r=2,absoluteStrokeWidth:s,className:o="",children:l,iconNode:c,...u},d)=>(0,a.createElement)("svg",{ref:d,...i,width:t,height:t,stroke:e,strokeWidth:s?24*Number(r)/Number(t):r,className:n("lucide",o),...!l&&!(e=>{for(let t in e)if(t.startsWith("aria-")||"role"===t||"title"===t)return!0})(u)&&{"aria-hidden":"true"},...u},[...c.map(([e,t])=>(0,a.createElement)(e,t)),...Array.isArray(l)?l:[l]])),l=(e,t)=>{let r=(0,a.forwardRef)(({className:r,...i},l)=>(0,a.createElement)(o,{ref:l,iconNode:t,className:n(`lucide-${s(e).replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase()}`,`lucide-${e}`,r),...i}));return r.displayName=s(e),r}},83278:(e,t,r)=>{"use strict";let a;r.d(t,{fs:()=>j,p5:()=>v,xe:()=>b,Sg:()=>x,rf:()=>g,XL:()=>y,jg:()=>p,fL:()=>m,Xb:()=>h,T:()=>f,Kk:()=>_,Ni:()=>k,J3:()=>u,B7:()=>d,Pj:()=>c});var s=r(12115);let n=e=>{let t,r=new Set,a=(e,a)=>{let s="function"==typeof e?e(t):e;if(!Object.is(s,t)){let e=t;t=(null!=a?a:"object"!=typeof s||null===s)?s:Object.assign({},t,s),r.forEach(r=>r(t,e))}},s=()=>t,n={setState:a,getState:s,getInitialState:()=>i,subscribe:e=>(r.add(e),()=>r.delete(e))},i=t=e(a,s,n);return n},i=e=>{let t=e?n(e):n,r=e=>(function(e,t=e=>e){let r=s.useSyncExternalStore(e.subscribe,s.useCallback(()=>t(e.getState()),[e,t]),s.useCallback(()=>t(e.getInitialState()),[e,t]));return s.useDebugValue(r),r})(t,e);return Object.assign(r,t),r};var o=r(27529);let l=(a=(e,t)=>({stats:null,statsLoading:!1,statsError:null,packets:[],packetsLoading:!1,packetsError:null,lastPacketTimestamp:0,logs:[],logsLoading:!1,liveMode:!0,flashReceived:0,flashAdvert:0,resourceHistory:[],lastResourceFetch:0,fetchStats:async()=>{e({statsLoading:!0,statsError:null});try{let t=await o.GT();e({stats:t,statsLoading:!1})}catch(t){e({statsError:t instanceof Error?t.message:"Failed to fetch stats",statsLoading:!1})}},fetchPackets:async(r=50)=>{e({packetsLoading:!0,packetsError:null});try{let a=await o.V0(r);if(a.success&&a.data){let r=a.data,{lastPacketTimestamp:s}=t(),n=r.length>0?Math.max(...r.map(e=>e.timestamp??0)):0;n>s&&s>0&&e({flashReceived:t().flashReceived+1}),e({packets:r,packetsLoading:!1,lastPacketTimestamp:n||s})}else e({packetsError:a.error||"Failed to fetch packets",packetsLoading:!1})}catch(t){e({packetsError:t instanceof Error?t.message:"Failed to fetch packets",packetsLoading:!1})}},fetchLogs:async()=>{e({logsLoading:!0});try{let t=await o.ao();e({logs:t.logs,logsLoading:!1})}catch(t){e({logsLoading:!1})}},setLiveMode:t=>{e({liveMode:t})},setMode:async e=>{try{(await o.iY(e)).success&&await t().fetchStats()}catch(e){console.error("Failed to set mode:",e)}},setDutyCycle:async e=>{try{(await o.Ty(e)).success&&t().fetchStats()}catch(e){console.error("Failed to set duty cycle:",e)}},sendAdvert:async()=>{try{let r=await o.f3();return r.success&&e({flashAdvert:t().flashAdvert+1}),r.success}catch(e){return console.error("Failed to send advert:",e),!1}},triggerFlashReceived:()=>{e({flashReceived:t().flashReceived+1})},triggerFlashAdvert:()=>{e({flashAdvert:t().flashAdvert+1})},addResourceDataPoint:(r,a,s)=>{let n=Date.now(),{lastResourceFetch:i,resourceHistory:o}=t();if(n-i<1e3)return void console.log("[Store] Skipping duplicate (too fast)");let l=new Date(n).toLocaleTimeString([],{hour:"2-digit",minute:"2-digit",second:"2-digit",hour12:!1}),c=[...o,{timestamp:n,time:l,cpu:r,memory:a}],u=c.length>s?c.slice(-s):c;console.log("[Store] Adding resource point, new length:",u.length),e({resourceHistory:u,lastResourceFetch:n})}}))?i(a):i,c=l,u=()=>l(e=>e.stats),d=()=>l(e=>e.statsError),h=()=>l(e=>e.packets),f=()=>l(e=>e.packetsLoading),p=()=>l(e=>e.logs),m=()=>l(e=>e.logsLoading),y=()=>l(e=>e.liveMode),g=()=>l(e=>e.flashReceived),x=()=>l(e=>e.flashAdvert),b=()=>l(e=>e.fetchPackets),v=()=>l(e=>e.fetchLogs),k=()=>l(e=>e.setLiveMode),_=()=>l(e=>e.resourceHistory),j=()=>l(e=>e.addResourceDataPoint)},84980:(e,t,r)=>{"use strict";r.d(t,{A:()=>a});let a=(0,r(78340).A)("clock",[["path",{d:"M12 6v6l4 2",key:"mmk7yg"}],["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}]])},89123:(e,t,r)=>{"use strict";r.d(t,{A:()=>a});let a=(0,r(78340).A)("chart-column",[["path",{d:"M3 3v16a2 2 0 0 0 2 2h16",key:"c24i48"}],["path",{d:"M18 17V9",key:"2bz60n"}],["path",{d:"M13 17V5",key:"1frdt8"}],["path",{d:"M8 17v-3",key:"17ska0"}]])},89363:(e,t,r)=>{"use strict";r.d(t,{A:()=>a});let a=(0,r(78340).A)("settings",[["path",{d:"M9.671 4.136a2.34 2.34 0 0 1 4.659 0 2.34 2.34 0 0 0 3.319 1.915 2.34 2.34 0 0 1 2.33 4.033 2.34 2.34 0 0 0 0 3.831 2.34 2.34 0 0 1-2.33 4.033 2.34 2.34 0 0 0-3.319 1.915 2.34 2.34 0 0 1-4.659 0 2.34 2.34 0 0 0-3.32-1.915 2.34 2.34 0 0 1-2.33-4.033 2.34 2.34 0 0 0 0-3.831A2.34 2.34 0 0 1 6.35 6.051a2.34 2.34 0 0 0 3.319-1.915",key:"1i5ecw"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]])},92509:(e,t,r)=>{Promise.resolve().then(r.t.bind(r,58288,23)),Promise.resolve().then(r.t.bind(r,67073,23)),Promise.resolve().then(r.t.bind(r,51743,23)),Promise.resolve().then(r.bind(r,17608)),Promise.resolve().then(r.bind(r,51568))},98500:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a={default:function(){return g},useLinkStatus:function(){return b}};for(var s in a)Object.defineProperty(t,s,{enumerable:!0,get:a[s]});let n=r(66388),i=r(95155),o=n._(r(12115)),l=r(20091),c=r(22909),u=r(21172),d=r(10857),h=r(70127);r(47284);let f=r(24972),p=r(69470),m=r(77565);function y(e){return"string"==typeof e?e:(0,l.formatUrl)(e)}function g(e){var t;let a,s,n,[l,g]=(0,o.useOptimistic)(f.IDLE_LINK_STATUS),b=(0,o.useRef)(null),{href:v,as:k,children:_,prefetch:j=null,passHref:w,replace:N,shallow:A,scroll:M,onClick:E,onMouseEnter:S,onTouchStart:P,legacyBehavior:L=!1,onNavigate:C,ref:O,unstable_dynamicOnHover:R,...T}=e;a=_,L&&("string"==typeof a||"number"==typeof a)&&(a=(0,i.jsx)("a",{children:a}));let F=o.default.useContext(c.AppRouterContext),$=!1!==j,I=!1!==j?null===(t=j)||"auto"===t?m.FetchStrategy.PPR:m.FetchStrategy.Full:m.FetchStrategy.PPR,{href:D,as:z}=o.default.useMemo(()=>{let e=y(v);return{href:e,as:k?y(k):e}},[v,k]);if(L){if(a?.$$typeof===Symbol.for("react.lazy"))throw Object.defineProperty(Error("`<Link legacyBehavior>` received a direct child that is either a Server Component, or JSX that was loaded with React.lazy(). This is not supported. Either remove legacyBehavior, or make the direct child a Client Component that renders the Link's `<a>` tag."),"__NEXT_ERROR_CODE",{value:"E863",enumerable:!1,configurable:!0});s=o.default.Children.only(a)}let U=L?s&&"object"==typeof s&&s.ref:O,B=o.default.useCallback(e=>(null!==F&&(b.current=(0,f.mountLinkInstance)(e,D,F,I,$,g)),()=>{b.current&&((0,f.unmountLinkForCurrentNavigation)(b.current),b.current=null),(0,f.unmountPrefetchableInstance)(e)}),[$,D,F,I,g]),q={ref:(0,u.useMergedRef)(B,U),onClick(e){L||"function"!=typeof E||E(e),L&&s.props&&"function"==typeof s.props.onClick&&s.props.onClick(e),!F||e.defaultPrevented||function(e,t,a,s,n,i,l){{let c,{nodeName:u}=e.currentTarget;if("A"===u.toUpperCase()&&((c=e.currentTarget.getAttribute("target"))&&"_self"!==c||e.metaKey||e.ctrlKey||e.shiftKey||e.altKey||e.nativeEvent&&2===e.nativeEvent.which)||e.currentTarget.hasAttribute("download"))return;if(!(0,p.isLocalURL)(t)){n&&(e.preventDefault(),location.replace(t));return}if(e.preventDefault(),l){let e=!1;if(l({preventDefault:()=>{e=!0}}),e)return}let{dispatchNavigateAction:d}=r(70156);o.default.startTransition(()=>{d(a||t,n?"replace":"push",i??!0,s.current)})}}(e,D,z,b,N,M,C)},onMouseEnter(e){L||"function"!=typeof S||S(e),L&&s.props&&"function"==typeof s.props.onMouseEnter&&s.props.onMouseEnter(e),F&&$&&(0,f.onNavigationIntent)(e.currentTarget,!0===R)},onTouchStart:function(e){L||"function"!=typeof P||P(e),L&&s.props&&"function"==typeof s.props.onTouchStart&&s.props.onTouchStart(e),F&&$&&(0,f.onNavigationIntent)(e.currentTarget,!0===R)}};return(0,d.isAbsoluteUrl)(z)?q.href=z:L&&!w&&("a"!==s.type||"href"in s.props)||(q.href=(0,h.addBasePath)(z)),n=L?o.default.cloneElement(s,q):(0,i.jsx)("a",{...T,...q,children:a}),(0,i.jsx)(x.Provider,{value:l,children:n})}r(29842);let x=(0,o.createContext)(f.IDLE_LINK_STATUS),b=()=>(0,o.useContext)(x);("function"==typeof t.default||"object"==typeof t.default&&null!==t.default)&&void 0===t.default.__esModule&&(Object.defineProperty(t.default,"__esModule",{value:!0}),Object.assign(t.default,t),e.exports=t.default)}},e=>{e.O(0,[519],()=>e(e.s=92509)),_N_E=e.O()}]);